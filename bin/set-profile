#!/usr/bin/env ruby

require 'pathname'

class Profile
  def initialize(name)
    abort unless name
    @name = name
  end

  def set
    write_session
    inform_iterm
  end

  private

  def inform_iterm
    system %Q{echo "\033]50;SetProfile=#{@name}\a"}
  end
end

Profile.new(ARGV.first).set
