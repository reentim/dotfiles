#!/usr/bin/env bash

main() {
  if ! [ -d $1/.git ]; then
    exit 1
  fi

  git --git-dir=$1/.git --no-pager \
    for-each-ref --format="%(push:track)" --contains=HEAD \
    | sed -E "s/ahead ([0-9]+)/ahead #[fg=green]\1#[default]/" \
    | sed -E "s/behind ([0-9]+)/behind #[fg=red]\1#[default]/"
}

main $1
