#!/usr/bin/env bash

main() {
  if [ $TERM_PROGRAM = "Kitty" ]; then
    if [ $TMUX ]; then
      tmux display "Detach first!"
      return 1
    fi
    kitty +kitten themes --config-file-name theme.conf
    return 0
  fi

  local theme="$1"
  if [ -z "$theme" ]; then
    local theme="$(list-themes | selecta)"
  fi

  [ -z "$theme" ] && exit 1

  change-theme "$theme"
  [ $TMUX ] && tmux-apply-colorscheme "$theme"
  return 0
}


main "$*"
