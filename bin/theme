#!/usr/bin/env bash

main() {
  local theme="$1"

  if [ $TERM_PROGRAM = "Kitty" ]; then
    kitty +kitten themes --config-file-name theme.conf
    theme="$(sed -n "4p" "$HOME/.config/kitty/theme.conf" | sed "s/# //")"
  fi

  if [ -z "$theme" ]; then
    local theme="$(list-themes | selecta)"
  fi

  [ -z "$theme" ] && echo "Error: couldn't determine theme" && exit 1

  change-theme "$theme"

  return 0
}


main "$*"
