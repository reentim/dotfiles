#!/bin/bash

unwip() {
  if [ `git log --format=%B -n 1 HEAD` = 'wip' ]; then
    git reset --soft HEAD~1;
    git reset HEAD;
  fi;
}

recent_branch() {
  git reflog -n 1000 |
    grep 'checkout: moving' |
    grep -oE --color=never "\S+$" |
    grep -v "\^" |
    awk ' !x[$0]++' | # remove duplicates while preserving sort order
    tail -n +2 |
    selecta |
    xargs git checkout
}
