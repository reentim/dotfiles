set -as terminal-overrides ',xterm*:Tc:sitm=\E[3m' # italics
set -g base-index 1
set -g default-shell $SHELL
set -g default-terminal "tmux-256color"
set -g history-limit 5000
set -g message-style "fg=white bg=black bright"
set -g mouse on
set -g pane-active-border-style "fg=green bg=default"
set -g pane-border-style "fg=green bg=default"
set -g prefix C-a
set -g update-environment "DISPLAY SSH_ASKPASS SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY ITERM_PROFILE ITERM_SESSION_ID"
set -sg escape-time 1
setw -g mode-keys vi
setw -g pane-base-index 1

# status line
set -g status-interval 1
set -g status-left "#[dim][#S #I #P]#[default] "
set -g status-left-length 30
set -g status-right "#(tmux-git-info #{pane_current_path})#[default] %a %-d %b %R"
set -g status-right-length 100
set -g status-style "fg=default bg=default"
setw -g window-status-current-style "fg=default bg=default bright"
setw -g window-status-style "fg=default bg=default dim"

# alphabet keys without prefix bindings:
# a, b, e, g, h, j, k, u, v, y, A, B, C, F, G, N, O, Q, R, S, T, U, V, W, X, Y, Z

bind-key % split-window -h -c "#{pane_current_path}"
bind-key '"' split-window -c "#{pane_current_path}"
bind-key -n C-h run-shell 'tmux-vim-select-pane -L'
bind-key -n C-j run-shell 'tmux-vim-select-pane -D'
bind-key -n C-k run-shell 'tmux-vim-select-pane -U'
bind-key -n C-l run-shell 'tmux-vim-select-pane -R'
bind-key -n M-k clear-history
bind-key -n M-l send-keys "C-l"
bind-key -r C-h select-window -t :-
bind-key -r C-l select-window -t :+
bind-key -r H resize-pane -L 10
bind-key -r I run-shell 'tmux-irb #{pane_current_path}'
bind-key -r J resize-pane -D 10
bind-key -r K resize-pane -U 10
bind-key -r L resize-pane -R 10
bind-key -r P run-shell 'tmux-psql #{pane_current_path}'
bind-key -r r source-file ~/.tmux.conf \; display "Reloaded!"
bind-key C-a send-prefix
bind-key c new-window -c "#{pane_current_path}"

# colourschemes
if-shell "iterm_session_profile | grep Light" "source ~/.tmux/light.conf"
if-shell "iterm_session_profile | grep Dark" "source ~/.tmux/dark.conf"
if-shell "iterm_session_profile | grep Black" "source ~/.tmux/black.conf"

run-shell ~/.tmux/tmux-resurrect/resurrect.tmux
